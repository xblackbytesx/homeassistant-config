- id: lb_001
  alias: lb_001
  trigger:
    platform: event
    event_type: button_pressed
    event_data:
      - {"state": "on", "entity_id": "switch.duo_switch_lb_l"}
      - {"state": "off", "entity_id": "switch.duo_switch_lb_l"}
      - {"state": "on", "entity_id": "switch.duo_switch_lb_r"}
      - {"state": "off", "entity_id": "switch.duo_switch_lb_r"}
  action:
    service_template: >
      {% if trigger.event.data.state == 'on' %}
        scene.turn_on
      {% elif trigger.event.data.state == 'off' %}
        light.turn_off
      {% endif %}
    data_template:
      entity_id: >
        {% if trigger.event.data.entity_id == 'switch.duo_switch_lb_l' and trigger.event.data.state == 'on' %}
          scene.lb_night
        {% elif trigger.event.data.entity_id == 'switch.duo_switch_lb_r' and trigger.event.data.state == 'on' %}
          scene.lb_day
        {% elif trigger.event.data.state == 'off' %}
          light.lg_lb_all
        {% endif %}


- id: lb_002
  alias: lb_002
  trigger:
    - platform: state
      entity_id: light.0x00178801039d140f_light
      to: 'on'
      for:
        hours: 1
        minutes: 30
    - platform: state
      entity_id: light.ledstrip_large_bedroom
      to: 'on'
      for:
        hours: 2
        minutes: 30
  action:
    service: light.turn_off
    data_template:
      entity_id: "{{ trigger.entity_id }}"
